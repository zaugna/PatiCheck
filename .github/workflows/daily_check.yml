name: Daily Check
on:
  schedule:
    - cron: '45 5 * * *' # 08:45 AM Istanbul
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: '3.9'
      
      # FIX: Added 'requests' to the installation list
      - run: pip install pandas supabase requests

      - run: python notifier.py
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_SERVICE_KEY: ${{ secrets.SUPABASE_SERVICE_KEY }}
          EMAIL_USER: ${{ secrets.EMAIL_USER }}
          EMAIL_PASS: ${{ secrets.EMAIL_PASS }}
          APP_URL: ${{ secrets.APP_URL }}
